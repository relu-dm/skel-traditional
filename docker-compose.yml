version: '3.8'

services:

  mysql:
    image: mysql
    container_name: mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root
    ports:
    - 3306:33060
    volumes:
    - mysql:/var/lib/mysql
    - ./database-dev.sql:/docker-entrypoint-initdb.d/database-dev.sql

  keycloak:
    image: jboss/keycloak
    container_name: keycloak
    ports:
    - 8080:8080
    depends_on:
      - mysql
    environment:
      KEYCLOAK_USER: root
      KEYCLOAK_PASSWORD: root
      DB_ADDR: mysql
      DB_DATABASE: keycloak
      DB_USER: root
      DB_PASSWORD: root
      #KEYCLOAK_IMPORT: /tmp/example-realm.json
    #volumes:
    #- /tmp/example-realm.json:/tmp/example-realm.json


volumes:
  mysql: